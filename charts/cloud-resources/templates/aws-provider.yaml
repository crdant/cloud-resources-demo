{{- if (lookup "pkg.crossplane.io/v1" "Provider" "" (include "cloud-resources.fullname" . | printf "%s-aws")) }}
apiVersion: aws.crossplane.io/v1beta1
kind: ProviderConfig
metadata:
  name: {{ include "cloud-resources.fullname" . }}-aws-provider
  annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-weight: "5"
spec:
  credentials:
    source: Secret
    secretRef:
      namespace: {{ .Release.Namespace }}
      name: aws-creds
      key: credentials
{{- end }}
